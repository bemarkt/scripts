custom:
  enable_rule_generator: false
  overwrite_original_rules: true

  clash_rule_base: >-
    base/all-base.tpl
  surge_rule_base: >-
    https://github.com/bemarkt/scripts/raw/master/provider/config/subconverter/all-base.tpl
  surfboard_rule_base: >-
    https://github.com/bemarkt/scripts/raw/master/provider/config/subconverter/all-base.tpl
  mellow_rule_base: >-
    https://github.com/bemarkt/scripts/raw/master/provider/config/subconverter/all-base.tpl
  quan_rule_base: >-
    https://github.com/bemarkt/scripts/raw/master/provider/config/subconverter/all-base.tpl
  quanx_rule_base: >-
    https://github.com/bemarkt/scripts/raw/master/provider/config/subconverter/all-base.tpl
  loon_rule_base: >-
    https://github.com/bemarkt/scripts/raw/master/provider/config/subconverter/all-base.tpl
  sssub_rule_base: >-
    https://github.com/bemarkt/scripts/raw/master/provider/config/subconverter/all-base.tpl

  exclude_remarks:
    - (剩余流量|到期时间|过期时间|官网地址|产品名称|先购买套餐|流量消耗|唯一官网|更新订阅)
    - (.*流量.*剩.*天)
    - (■等级警报■)
    - (近期下线)
    - (游戏专线)

  rename_node:
    - { match: 商宽, replace: "" }
    - { match: 上海, replace: 沪 }
    - { match: 中国, replace: 中 }
    - { match: 云南, replace: 云 }
    - { match: 佛山, replace: 禅 }
    - { match: 俄罗斯, replace: 俄 }
    - { match: 加拿大, replace: 加 }
    - { match: 北京, replace: 京 }
    - { match: 南京, replace: 宁 }
    - { match: 南阳, replace: 宛 }
    - { match: 印度, replace: 印 }
    - { match: 台湾, replace: 台 }
    - { match: 四川, replace: 川 }
    - { match: 土耳其, replace: 土 }
    - { match: 天津, replace: 津 }
    - { match: 宁波, replace: 甬 }
    - { match: 安徽, replace: 皖 }
    - { match: 广东, replace: 粤 }
    - { match: 广州, replace: 穗 }
    - { match: 徐州, replace: 徐 }
    - { match: 德国, replace: 德 }
    - { match: 意大利, replace: 意 }
    - { match: 成都, replace: 蓉 }
    - { match: 新加坡, replace: 新 }
    - { match: 日本, replace: 日 }
    - { match: 杭州, replace: 杭 }
    - { match: 武汉, replace: 汉 }
    - { match: 汕头, replace: 汕 }
    - { match: 江苏, replace: 苏 }
    - { match: 沈阳, replace: 沈 }
    - { match: 法国, replace: 法 }
    - { match: 泰国, replace: 泰 }
    - { match: 浙江, replace: 浙 }
    - { match: 海南, replace: 琼 }
    - { match: 深圳, replace: 深 }
    - { match: 湖北, replace: 鄂 }
    - { match: 湖南, replace: 湘 }
    - { match: 长沙, replace: 长 }
    - { match: 澳门, replace: 澳 }
    - { match: 珠海, replace: 珠 }
    - { match: 瑞士, replace: 瑞 }
    - { match: 福建, replace: 闽 }
    - { match: 美国, replace: 美 }
    - { match: 芬兰, replace: 芬 }
    - { match: 英国, replace: 英 }
    - { match: 菲律宾, replace: 菲 }
    - { match: 许昌, replace: 许 }
    - { match: 贵州, replace: 贵 }
    - { match: 贵阳, replace: 筑 }
    - { match: 越南, replace: 越 }
    - { match: 镇江, replace: 镇 }
    - { match: 青岛, replace: 青 }
    - { match: 青海, replace: 青 }
    - { match: 韩国, replace: 韩 }
    - { match: 香港, replace: 港 }
    - { match: 深港专线, replace: 深港 }
    - { match: "(-)", replace: ▷ }
    - { match: 隧道测试, replace: "" }
    - { match: 隧道, replace: "" }
    - { match: "隧道测试[0-9]组", replace: "" }
    - { match: "[0-9]组", replace: "" }
    - { match: "(倍率:)", replace: × }
    - { match: " ", replace: "" }
    - { match: "[ ]", replace: "" }
    - { match: "( )", replace: "" }

  proxy_groups:
    # AI云可用节点
    - name: "🔄 AI云可达"
      type: fallback
      rule:
        [
          "[]🇭🇰 香港 | Too Naive",
          "[]🇨🇳 台湾 | 你好机车哦",
          "[]🇯🇵 日本 | 神罗天征",
          "[]🇰🇷 韩国 | 来自星星的你",
          "[]🇸🇬 新加坡 | 绀青之拳",
          "[]🇺🇲 美国 | 探索者号",
          "[]🗺️ 其他 | 剩余价值",
        ]
      url: "http://cp.cloudflare.com/generate_204"
      interval: 300
      timeout: 5
      tolerance: 60
    # 代理节点选择
    - name: "⛵ 直挂云帆济沧海"
      type: select
      rule:
        [
          "[]🇭🇰 香港 | Too Naive",
          "[]🇨🇳 台湾 | 你好机车哦",
          "[]🇯🇵 日本 | 神罗天征",
          "[]🇰🇷 韩国 | 来自星星的你",
          "[]🇸🇬 新加坡 | 绀青之拳",
          "[]🇺🇲 美国 | 探索者号",
          "[]🗺️ 其他 | 剩余价值",
          "[]🔄 AI云可达",
          "[]🏠 锦城虽云乐，不如早还家",
        ]
    # 国内网站
    - name: "🚣 长风破浪会有时"
      type: select
      rule: ["[]🏠 锦城虽云乐，不如早还家", "[]⛵ 直挂云帆济沧海"]
    # 大陆流媒体面向港澳台限定服务
    - name: "🌏 国内媒体"
      type: select
      rule:
        [
          "[]🚣 长风破浪会有时",
          "[]🇭🇰 香港 | Too Naive",
          "[]🇨🇳 台湾 | 你好机车哦",
          "[]⛵ 直挂云帆济沧海",
        ]
    # 国际高雅音乐平台
    - name: "🎵 高雅音乐"
      type: select
      rule:
        [
          "[]🇸🇬 新加坡 | 绀青之拳",
          "[]🇭🇰 香港 | Too Naive",
          "[]🇨🇳 台湾 | 你好机车哦",
          "[]🇯🇵 日本 | 神罗天征",
          "[]🇰🇷 韩国 | 来自星星的你",
          "[]🇺🇲 美国 | 探索者号",
          "[]⛵ 直挂云帆济沧海",
        ]
    # 国外流媒体解锁
    - name: "🎞️ 流媒体"
      type: select
      rule:
        [
          "[]🇸🇬 新加坡 | 绀青之拳",
          "[]🇭🇰 香港 | Too Naive",
          "[]🇨🇳 台湾 | 你好机车哦",
          "[]🇯🇵 日本 | 神罗天征",
          "[]🇰🇷 韩国 | 来自星星的你",
          "[]🇺🇲 美国 | 探索者号",
          "[]⛵ 直挂云帆济沧海",
        ]
    # 国际媒体服务
    - name: "🌎 国际媒体"
      type: select
      rule:
        [
          "[]⛵ 直挂云帆济沧海",
          "[]🔄 AI云可达",
          "[]🇭🇰 香港 | Too Naive",
          "[]🇨🇳 台湾 | 你好机车哦",
          "[]🇯🇵 日本 | 神罗天征",
          "[]🇰🇷 韩国 | 来自星星的你",
          "[]🇸🇬 新加坡 | 绀青之拳",
          "[]🇺🇲 美国 | 探索者号",
        ]
    # 青壮年服务
    - name: "💪 青壮年模式"
      type: select
      rule:
        [
          "[]⛵ 直挂云帆济沧海",
          "[]🚣 长风破浪会有时",
          "[]🇭🇰 香港 | Too Naive",
          "[]🇨🇳 台湾 | 你好机车哦",
          "[]🇯🇵 日本 | 神罗天征",
          "[]🇰🇷 韩国 | 来自星星的你",
          "[]🇸🇬 新加坡 | 绀青之拳",
          "[]🇺🇲 美国 | 探索者号",
        ]
    # Developer 开发者服务
    - name: "👨‍💻 开发者服务"
      type: select
      rule: ["[]⛵ 直挂云帆济沧海", "[]🚣 长风破浪会有时"]
    # Scholar 学术服务
    - name: "👨‍🔬 学术服务"
      type: select
      rule: ["[]🚣 长风破浪会有时", "[]⛵ 直挂云帆济沧海"]
    # Samsung 服务代理
    - name: "✨ 三星服务"
      type: select
      rule: ["[]🚣 长风破浪会有时", "[]⛵ 直挂云帆济沧海"]
    # Apple 服务代理
    - name: "🍎 苹果服务"
      type: select
      rule: ["[]🚣 长风破浪会有时", "[]⛵ 直挂云帆济沧海"]
    # Microsoft 服务代理
    - name: "Ⓜ️ 微软服务"
      type: select
      rule: ["[]🚣 长风破浪会有时", "[]⛵ 直挂云帆济沧海"]
    # SpeedTest 测速
    - name: "⏱️ 测速服务"
      type: select
      rule: ["[]⛵ 直挂云帆济沧海", "[]🚣 长风破浪会有时"]
    # 广告拦截
    - name: "🚧 通用拦截"
      type: select
      rule: ["[]🈲 一夫当关，万夫莫开", "[]🏠 锦城虽云乐，不如早还家"]
    - name: "🍃 应用净化"
      type: select
      rule:
        [
          "[]🚧 通用拦截",
          "[]🈲 一夫当关，万夫莫开",
          "[]🏠 锦城虽云乐，不如早还家",
        ]
    # 私のDIY
    - name: "🇭🇰 香港 | Too Naive"
      type: select
      rule: ["[]🇭🇰 香港-Others", "[]🇭🇰 深港专线"]
    - name: "🇭🇰 香港-Others"
      type: url-test
      rule: ["(^(?!🇭🇰 深港).*港)"]
      url: "http://cp.cloudflare.com/generate_204"
      interval: 300
      timeout: 5
      tolerance: 60
    - name: "🇭🇰 深港专线"
      type: url-test
      rule: ["(深港(?!回))", "[]REJECT"]
      url: "http://cp.cloudflare.com/generate_204"
      interval: 300
      timeout: 5
      tolerance: 60
    - name: "🇨🇳 台湾 | 你好机车哦"
      type: url-test
      rule: ["(台)"]
      url: "http://cp.cloudflare.com/generate_204"
      interval: 300
      timeout: 5
      tolerance: 60
    - name: "🇯🇵 日本 | 神罗天征"
      type: url-test
      rule: ["(日)"]
      url: "http://cp.cloudflare.com/generate_204"
      interval: 300
      timeout: 5
      tolerance: 60
    - name: "🇰🇷 韩国 | 来自星星的你"
      type: url-test
      rule: ["(韩)"]
      url: "http://cp.cloudflare.com/generate_204"
      interval: 300
      timeout: 5
      tolerance: 60
    - name: "🇸🇬 新加坡 | 绀青之拳"
      type: url-test
      rule: ["(🇸🇬.*新)"]
      url: "http://cp.cloudflare.com/generate_204"
      interval: 300
      timeout: 5
      tolerance: 60
    - name: "🇺🇲 美国 | 探索者号"
      type: url-test
      rule: ["(美)"]
      url: "http://cp.cloudflare.com/generate_204"
      interval: 300
      timeout: 5
      tolerance: 60
    - name: "🗺️ 其他 | 剩余价值"
      type: select
      rule: ["(^(?!.*港|.*台|.*日|.*韩|🇸🇬.*新|🇺🇸.*美).*)"]
    # 你以为你能跑？
    - name: "🕸️ 漏网之鱼"
      type: select
      rule: ["[]⛵ 直挂云帆济沧海", "[]🚣 长风破浪会有时"]
    - name: "🏠 锦城虽云乐，不如早还家"
      type: select
      rule: ["[]DIRECT"]
    - name: "🈲 一夫当关，万夫莫开"
      type: select
      rule: ["[]REJECT"]

  add_emoji: true
  remove_old_emoji: true
  emojis:
    - { match: "(?i:Bandwidth|expire|流量|时间|应急|过期)", emoji: 🏳️‍🌈 }
    - { match: "(NetEaseMusic|网易云音乐|网易云解锁)", emoji: 🎶 }
    - { match: "(Ascension|阿森松)", emoji: 🇦🇨 }
    - { match: "(Dubai|迪拜)", emoji: 🇦🇪 }
    - { match: "(AR|阿根廷|Argentina)", emoji: 🇦🇷 }
    - { match: "(Austria|Vienna|奥地利|维也纳)", emoji: 🇦🇹 }
    - { match: "(AU|Australia|Sydney|澳大利亚|澳洲|悉尼)", emoji: 🇦🇺 }
    - { match: "(BE|Belgium|比利时)", emoji: 🇧🇪 }
    - { match: "(BR|Brazil|Paulo|巴西|圣保罗)", emoji: 🇧🇷 }
    - {
        match: "(Canada|Montreal|Vancouver|加(?!州|坡).*(?!▷)|蒙特利尔|温哥华|楓葉|枫叶|CA)",
        emoji: 🇨🇦,
      }
    - { match: "(Switzerland|Zurich|瑞士|苏黎世)", emoji: 🇨🇭 }
    - { match: "(DE|Germany|法兰克福|德.*(?!▷))", emoji: 🇩🇪 }
    - { match: "(Denmark|丹麦)", emoji: 🇩🇰 }
    - { match: "(Spain|西班牙)", emoji: 🇪🇸 }
    - { match: "(Europe|欧洲)", emoji: 🇪🇺 }
    - { match: "(Finland|Helsinki|芬兰|赫尔辛基)", emoji: 🇫🇮 }
    - { match: "(FR|France|Paris|法国.*(?!▷)|巴黎)", emoji: 🇫🇷 }
    - {
        match: "(?i:UK|England|United.*?Kingdom|London|英.*(?!▷)|[^-]英|伦敦)",
        emoji: 🇬🇧,
      }
    - { match: "(Indonesia|Jakarta|印尼|印度尼西亚|雅加达)", emoji: 🇮🇩 }
    - { match: "(Ireland|Dublin|爱尔兰|都柏林)", emoji: 🇮🇪 }
    - { match: "(India|Mumbai|印度|孟买)", emoji: 🇮🇳 }
    - { match: "(Italy|Milan|意大利|米兰)", emoji: 🇮🇹 }
    - {
        match: "(?i:JP|Japan|Tokyo|Osaka|Saitama|日.*(?!▷)|东京|大阪|埼玉|沪日|穗日|川日|中日|泉日|杭日|[^-]日)",
        emoji: 🇯🇵,
      }
    - { match: "(KP|North.*?Korea|朝鲜)", emoji: 🇰🇵 }
    - { match: "(?i:KR|Korea|KOR|首尔|韩|韓)", emoji: 🇰🇷 }
    - { match: "(MO|Macao|澳.*(?!▷)|CTM)", emoji: 🇲🇴 }
    - { match: "(MY|Malaysia|马来西亚)", emoji: 🇲🇾 }
    - { match: "(NL|Netherlands|荷兰|阿姆斯特丹)", emoji: 🇳🇱 }
    - { match: "(PH|Philippines|菲律宾)", emoji: 🇵🇭 }
    - { match: "(RO|Romania|罗马尼亚)", emoji: 🇷🇴 }
    - {
        match: "(?i:RU|Russia|Moscow|Petersburg|Siberia|俄.*(?!▷)|伯力|莫斯科|圣彼得堡|西伯利亚|新西伯利亚|哈巴罗夫斯克|俄罗斯|京俄|杭俄|[^-]俄)",
        emoji: 🇷🇺,
      }
    - { match: "(Arabia|沙特)", emoji: 🇸🇦 }
    - { match: "(SE|Sweden|瑞典)", emoji: 🇸🇪 }
    - {
        match: "(?i:SG|新(?!▷|西)|Singapore|狮城|沪新|京新|泉新|穗新|深新|杭新|[^-]新)",
        emoji: 🇸🇬,
      }
    - { match: "(TH|Thailand|泰国|曼谷)", emoji: 🇹🇭 }
    - { match: "(TR|Turkey|土.*(?!▷)|伊斯坦布尔)", emoji: 🇹🇷 }
    - {
        match: "(?i:US|America|United.*?States|美.*(?!▷)|[^-]美|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|沪美|京美)",
        emoji: 🇺🇸,
      }
    - { match: "(VN|Vietnam|越南)", emoji: 🇻🇳 }
    - { match: "(ZA|Africa|南非)", emoji: 🇿🇦 }
    - {
        match: "(?i:HK|Hong.*?Kong|HKT|HKBN|HGC|WTT|CMI|港(?!▷|回))",
        emoji: 🇭🇰,
      }
    - {
        match: "(?i:TW|Taiwan|CHT|HiNet|台.*(?!▷)|台北|台中|新北|彰化|[^-]台)",
        emoji: 🇹🇼,
      }
    - {
        match: "(?i:CN|China|回国|中.*(?!▷)|苏.*(?!▷)|京.*(?!▷)|沪.*(?!▷)|穗.*(?!▷)|深(?!▷|港)|杭.*(?!▷)|徐.*(?!▷)|青.*(?!▷)|甬.*(?!▷)|镇.*(?!▷)|禅.*(?!▷)|蓉.*(?!▷)|江苏|北京|上海|广州|深圳|杭州|常州|徐州|青岛|宁波|镇江|成都|back)",
        emoji: 🇨🇳,
      }

template_args:
  - { key: clash.mixed_port, value: 8888 }
  - { key: clash.redir_port, value: 8890 }
  - { key: clash.allow_lan, value: false }
  - { key: clash.log_level, value: silent }
  - { key: clash.ipv6, value: true }
  - { key: clash.api_port, value: 0.0.0.0:8080 }
